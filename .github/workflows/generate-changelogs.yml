name: Generate Changelogs
run-name: 'chore(release): generate changelogs for v0.1.0..v0.1.0rc'

on:
  workflow_dispatch:
  push:
    branches:
      - generate-changelogs
    # tags:

jobs:
  build:
    name: Create Release
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - run: |
          git fetch --prune --unshallow --tags

      - name: '✏️ Generate release changelog'
        uses: heinrichreimer/github-changelog-generator-action@v2.3
        id: gen-changelog
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          pullRequests: true
          simpleList: true
          since-tag: v0.1.0rc

      - name: Print result
        run: |
          echo "${{ steps.gen-changelog.outputs.changelog }}"
